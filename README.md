# Плэйбук Ansible для установки прокси-сервера и VPN

Устанавливает прокси-сервер Squid и VPN-сервер OpenVPN на сервере с ОС Ubuntu 24.04.

## Перед началом работы

### Для настройки сервера

1. Установите Python и Ansible на вашу машину. Инструкции можно найти на официальном сайте Ansible.
2. Создайте и скопируйте на свой удаленный сервер ключ SSH. Убедитесь, что вы можете подключиться к серверу по SSH без ввода пароля.
3. Укажите IP-адрес вашего сервера и имя пользователя в файле `hosts` в текущем каталоге.
4. Придумайте и укажите в переменных в файле setup-server.yml имя профиля OpenVPN, он же будет использоваться как логин для прокси, используйте только латиницу, знаки подчеркивания и тире. Таким же образом укажите и пароль для прокси-сервера Squid.
5. Установите клиент OpenVPN на ваш компьютер. Инструкции можно найти на официальном сайте OpenVPN.

### Для добавления профиля

1. Придумайте и укажите в переменных в файле add-client.yml имя профиля OpenVPN, он же будет использоваться как логин для прокси, используйте только латиницу, знаки подчеркивания и тире. Таким же образом укажите и пароль для прокси-сервера Squid.

## Запуск 

### Настройка сервера и создание первого профиля

Для настройки сервера выполните следующую команду на локальной машине:

```bash
ansible-playbook setup-server.yml
```

Данная команда установит OpenVPN и Squid на вашем удаленном сервере, а также создаст профиль OpenVPN и настроит Squid.

### Добавление нового профиля

Для добавления профиля OpenVPN и Squid выполните следующую команду на локальной машине:

```bash
ansible-playbook add-client.yml
```

## Проверка работы

Запустите клиент OpenVPN на вашем компьютере, добавьте в нем конфигурацию с помощью файла .ovpn который Ansible скопировал с удаленного сервера. 

Проверьте работу прокси-сервера Squid используя указанный ранее логин и пароль, к примеру с помощью расширения FoxyProxy для Firefox.